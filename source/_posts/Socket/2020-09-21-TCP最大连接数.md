# TCP 最大连接数为28232

Linux对外的端口分配是有一定限制的，默认不超过28232个。

```shell
cat /proc/sys/net/ipv4/ip_local_range
# 输出为
32768 60999

```

## 方法一

两个数字相减刚好为28232。如果要对其范围进行修改，可将两个数字更改为10000 65535，注意用户可用端口方位为1024~65535.

```shell
  echo "10000 65535" > /proc/sys/net/ipv4/ip_local_port_range
  sysctl -p	
```

## 方法二

快速回收端口

```shell
sudo vim /etc/sysctl.conf
# 末尾添加上
net.ipv4.tcp_tw_recycle=1
sysctl -p
```

## 语言

系统在高并发短连接的情况下，会出现大量处于TIME_WAIT的SOCKET。

这里短连接是指：**业务处理+传输数据的时间 远远小于 TIMEWAIT超时的时间”的连接**

